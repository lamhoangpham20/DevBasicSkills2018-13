<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Random number generator test tool</title>
<style>
.inputNumber { width: 4em; }
.svgChart { border: 1px solid black; }
.rectBar  { fill: lightblue; }
.rectText { fill: black; }
</style>
<link rel="stylesheet" type="text/css" href="Main_Page.css">
</head>
<body>
        <div id="Background"></div>
        <div id="menu_top">
            <ul>
                <li><a href="./Main_Page.html" title="Home">Home</a></li>
                <li><a href="./Number_Converter.html" title="Number Converter">Number Converter</a></li>
                <li><a href="./Number_system_outputs.html" title="Number System Output">Number System Output</a></li>
                <li><a href="./Combinators.html" title="combinatorics">Conbinatorics</a></li>
                <li><a href="./Truth_table.html" title="Truth table">Truth Table</a></li>
                <li><a href="./Random_values.html" title="Random Generators">Random Generators</a></li>
            </ul>
        </div>
<script type="text/javascript">
const CHART_BAR_WIDTH_PX = 20;         //Horizontal width of chart bar
const CHART_BAR_HEIGHT_STEP_PX = 10;   //How many pixels each step (distribution amount) should be
const CHART_SPACE_BETWEEN_BARS_PX = 2; //How many pixels space there is between chart bars

var randomNumbers = []; //Random numbers to test are stored to this global variable
var randomRangeMin;     //To be able to check proper distribution we need to know random generator range min
var randomRangeMax;     //To be able to check proper distribution we need to know random generator range max


//This is called when user clicks Test-button
function testRandomNumbersDistribution()
{
    if(generateRandomNumbers() == true)
    {
        //Only draw chart if random numbers are succesfully generated (return value true)
        drawRandomDistributionChart();
    }
}


function generateRandomNumbers()
{
    //Clear old distribution chart
    document.getElementById("distributionDiv").innerHTML = '';

    //Get user input
    randomRangeMin = parseInt(document.getElementById("rangeMin").value); //Saved to global variable
    randomRangeMax = parseInt(document.getElementById("rangeMax").value); //Saved to global variable
    var amount     = parseInt(document.getElementById("amount").value);

    //Check that user input is correct, min must be between 1-99, max must be between 2-100,
    //min must not be same as max, and min must be smaller than max, amount must be between 1-1000
    if(randomRangeMin < 1 || randomRangeMin > 99 || randomRangeMax < 2 || randomRangeMax > 100 ||
       randomRangeMin == randomRangeMax || randomRangeMin > randomRangeMax ||
       amount < 1 || amount > 1000)
    {
        alert('Check your input values!\nMin must be between 1-99.\nMax must be between 2-100.\nMin must not be same as Max.\nMin must be smaller than Max.\nAmount must be between 1-1000.');
        return false;
    }


    //Fill array with random numbers
    randomNumbers = [];
    for(var i=0; i<amount; i++)
    {
        randomNumbers[i] = Math.floor((Math.random() * randomRangeMax) + randomRangeMin);
    }

    return true;
}


function drawRandomDistributionChart()
{
    //Counter to count how many bars has been added to chart
    var barCounter = 0;
    
    //Create empty SVG image
    var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    
    //Go through random range (min, max) and count from generated random number how many times each number was generated.
    for(var rangeIdx=randomRangeMin; rangeIdx<=randomRangeMax; rangeIdx++)
    {
        var howManyTimesNumberGenerated = 0;
        for(var i=0; i<randomNumbers.length; i++)
        {
            if(randomNumbers[i] == rangeIdx)
            {
                howManyTimesNumberGenerated++;
            }
        }
        
        //Then create bar (rectangle) to distribution chart for every number in range
        //var svg = document.getElementById('randomDistribution');
        var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('x', barCounter*(CHART_BAR_WIDTH_PX+CHART_SPACE_BETWEEN_BARS_PX));
        rect.setAttribute('y', 0);
        rect.setAttribute('width', CHART_BAR_WIDTH_PX+'px');
        rect.setAttribute('height', (howManyTimesNumberGenerated*CHART_BAR_HEIGHT_STEP_PX)+'px');
        rect.setAttribute('class', 'rectBar');

        //Add title to rect so user can see actual values by hovering mouse on top of bar
        var title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
        title.textContent = 'Random number ' + rangeIdx + ' generated ' + howManyTimesNumberGenerated + ' times';
        rect.appendChild(title);

        svg.appendChild(rect); //Add rectangle to svg image

        barCounter++;
    }

    svg.setAttribute('class', 'svgChart');
    svg.setAttribute('width', (barCounter*(CHART_BAR_WIDTH_PX + CHART_SPACE_BETWEEN_BARS_PX))-CHART_SPACE_BETWEEN_BARS_PX );
    document.getElementById("distributionDiv").appendChild(svg);
}
</script>

<h1>Random number generator test tool</h1>

<p>
To generate randon number test material, enter random number range (positive integers only) and amount,<br>
then click button to see chart showing random number distribution:<br>
Min:    <input type="number" id="rangeMin" value="1"   min="1" max="99"   step="1" class="inputNumber"> 
Max:    <input type="number" id="rangeMax" value="25"  min="2" max="100"  step="1" class="inputNumber"> 
Amount: <input type="number" id="amount"   value="100" min="1" max="1000" step="1" class="inputNumber"> 
<button type="button" onclick="testRandomNumbersDistribution()">Test</button>
</p>

<div id="distributionDiv"></div>

</body>
</html>
